(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3e5d698c"],{"159d":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l={class:"container"},n=Object(a["g"])("h2",{class:"text-center fw-bold py-4"},"訂單",-1),r={class:"table"},d=Object(a["g"])("thead",null,[Object(a["g"])("tr",null,[Object(a["g"])("th",null,"#"),Object(a["g"])("th",null,"購買時間"),Object(a["g"])("th",null,"Email"),Object(a["g"])("th",null,"購買款項"),Object(a["g"])("th",null,"應付金額"),Object(a["g"])("th",null,"是否付款"),Object(a["g"])("th",null,"編輯")])],-1),b={class:"form-check form-switch"},i={key:0},o={key:1},s={class:"btn-group",role:"group","aria-label":"Basic outlined example"};function O(e,t,c,O,u,p){var j=Object(a["u"])("OrderModal"),g=Object(a["u"])("DelModal"),h=Object(a["u"])("Pagination");return Object(a["p"])(),Object(a["d"])("div",l,[n,Object(a["g"])("table",r,[d,Object(a["g"])("tbody",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["t"])(u.orders,(function(t,c){return Object(a["p"])(),Object(a["d"])(a["a"],{key:t.id},[u.orders.length?(Object(a["p"])(),Object(a["d"])("tr",{key:0,class:{"text-secondary":!t.is_paid}},[Object(a["g"])("th",null,Object(a["w"])(c+1),1),Object(a["g"])("td",null,Object(a["w"])(e.$filters.date(t.create_at)),1),Object(a["g"])("td",null,Object(a["w"])(t.user.email),1),Object(a["g"])("td",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["t"])(t.products,(function(e){return Object(a["p"])(),Object(a["d"])("ul",{class:"list-unstyled",key:e},[Object(a["g"])("li",null,Object(a["w"])(e.product.title)+" ，數量 : "+Object(a["w"])(e.qty)+Object(a["w"])(e.product.unit),1)])})),128))]),Object(a["g"])("td",null,Object(a["w"])(e.$filters.currency(t.total)),1),Object(a["g"])("td",null,[Object(a["g"])("div",b,[Object(a["C"])(Object(a["g"])("input",{class:"form-check-input",type:"checkbox",id:"paidSwitch".concat(t.id),"onUpdate:modelValue":function(e){return t.is_paid=e},onChange:function(e){return p.updatePaid(t)}},null,40,["id","onUpdate:modelValue","onChange"]),[[a["y"],t.is_paid]]),Object(a["g"])("label",{class:"form-check-label",for:"paidSwitch".concat(t.id)},[t.is_paid?(Object(a["p"])(),Object(a["d"])("span",i,"已付款")):(Object(a["p"])(),Object(a["d"])("span",o,"未付款"))],8,["for"])])]),Object(a["g"])("td",null,[Object(a["g"])("div",s,[Object(a["g"])("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(e){return p.openModal(t)}}," 檢視 ",8,["onClick"]),Object(a["g"])("button",{type:"button",class:"btn btn-outline-danger btn-sm",onClick:function(e){return p.openDelOrderModal(t)}}," 刪除 ",8,["onClick"])])])],2)):Object(a["e"])("",!0)],64)})),128))])]),Object(a["g"])(j,{ref:"OrderModal",order:u.tempOrder,onUpdatePaid:p.updatePaid},null,8,["order","onUpdatePaid"]),Object(a["g"])(g,{ref:"DelModal",product:u.tempOrder,onDelItem:p.delOrder},null,8,["product","onDelItem"]),Object(a["g"])(h,{pages:u.pagination,onEmitPages:p.getOrders},null,8,["pages","onEmitPages"])])}var u=c("5530"),p=(c("99af"),c("1799")),j=(c("b0c0"),{class:"modal fade",id:"productModal",tabindex:"-1",role:"dialog","aria-labelledby":"exampleModalLabel","aria-hidden":"true",ref:"bsModal"}),g={class:"modal-dialog modal-xl",role:"document"},h={class:"modal-content border-0"},m=Object(a["g"])("div",{class:"modal-header bg-dark text-white"},[Object(a["g"])("h5",{class:"modal-title",id:"exampleModalLabel"},[Object(a["g"])("span",null,"訂單細節")]),Object(a["g"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),f={class:"modal-body"},y={class:"row"},k={class:"col-md-4"},v=Object(a["g"])("h3",null,"用戶資料",-1),w={class:"table"},x={key:0},M=Object(a["g"])("th",{style:{width:"100px"}},"姓名",-1),_=Object(a["g"])("th",null,"Email",-1),P=Object(a["g"])("th",null,"電話",-1),C=Object(a["g"])("th",null,"地址",-1),$={class:"col-md-8"},D=Object(a["g"])("h3",null,"訂單細節",-1),U={class:"table"},E=Object(a["g"])("th",{style:{width:"100px"}},"訂單編號",-1),S=Object(a["g"])("th",null,"下單時間",-1),V=Object(a["g"])("th",null,"付款時間",-1),q={key:0},I={key:1},J=Object(a["g"])("th",null,"付款狀態",-1),L={key:0,class:"text-success"},N={key:1,class:"text-muted"},B=Object(a["g"])("th",null,"總金額",-1),F=Object(a["g"])("h3",null,"選購商品",-1),z={class:"table"},A=Object(a["g"])("thead",null,[Object(a["g"])("tr")],-1),G={class:"text-end"},H={class:"d-flex justify-content-end"},K={class:"form-check"},Q={class:"form-check-label",for:"flexCheckDefault"},R={key:0},T={key:1},W={class:"modal-footer"},X=Object(a["g"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function Y(e,t,c,l,n,r){return Object(a["p"])(),Object(a["d"])("div",j,[Object(a["g"])("div",g,[Object(a["g"])("div",h,[m,Object(a["g"])("div",f,[Object(a["g"])("div",y,[Object(a["g"])("div",k,[v,Object(a["g"])("table",w,[n.tempOrder.user?(Object(a["p"])(),Object(a["d"])("tbody",x,[Object(a["g"])("tr",null,[M,Object(a["g"])("td",null,Object(a["w"])(n.tempOrder.user.name),1)]),Object(a["g"])("tr",null,[_,Object(a["g"])("td",null,Object(a["w"])(n.tempOrder.user.email),1)]),Object(a["g"])("tr",null,[P,Object(a["g"])("td",null,Object(a["w"])(n.tempOrder.user.tel),1)]),Object(a["g"])("tr",null,[C,Object(a["g"])("td",null,Object(a["w"])(n.tempOrder.user.address),1)])])):Object(a["e"])("",!0)])]),Object(a["g"])("div",$,[D,Object(a["g"])("table",U,[Object(a["g"])("tbody",null,[Object(a["g"])("tr",null,[E,Object(a["g"])("td",null,Object(a["w"])(n.tempOrder.id),1)]),Object(a["g"])("tr",null,[S,Object(a["g"])("td",null,Object(a["w"])(e.$filters.date(n.tempOrder.create_at)),1)]),Object(a["g"])("tr",null,[V,Object(a["g"])("td",null,[n.tempOrder.paid_date?(Object(a["p"])(),Object(a["d"])("span",q,Object(a["w"])(e.$filters.date(n.tempOrder.paid_date)),1)):(Object(a["p"])(),Object(a["d"])("span",I,"時間不正確"))])]),Object(a["g"])("tr",null,[J,Object(a["g"])("td",null,[n.tempOrder.is_paid?(Object(a["p"])(),Object(a["d"])("strong",L,"已付款")):(Object(a["p"])(),Object(a["d"])("span",N,"尚未付款"))])]),Object(a["g"])("tr",null,[B,Object(a["g"])("td",null,Object(a["w"])(e.$filters.currency(n.tempOrder.total)),1)])])]),F,Object(a["g"])("table",z,[A,Object(a["g"])("tbody",null,[(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["t"])(n.tempOrder.products,(function(t){return Object(a["p"])(),Object(a["d"])("tr",{key:t.id},[Object(a["g"])("th",null,Object(a["w"])(t.product.title),1),Object(a["g"])("td",null,Object(a["w"])(t.qty)+" / "+Object(a["w"])(t.product.unit),1),Object(a["g"])("td",G,Object(a["w"])(e.$filters.currency(t.final_total)),1)])})),128))])]),Object(a["g"])("div",H,[Object(a["g"])("div",K,[Object(a["C"])(Object(a["g"])("input",{class:"form-check-input",type:"checkbox",value:"",id:"flexCheckDefault","onUpdate:modelValue":t[1]||(t[1]=function(e){return n.tempOrder.is_paid=e})},null,512),[[a["y"],n.tempOrder.is_paid]]),Object(a["g"])("label",Q,[n.tempOrder.is_paid?(Object(a["p"])(),Object(a["d"])("span",R,"已付款")):(Object(a["p"])(),Object(a["d"])("span",T,"未付款"))])])])])])]),Object(a["g"])("div",W,[X,Object(a["g"])("button",{type:"button",class:"btn btn-primary",onClick:t[2]||(t[2]=function(t){return e.$emit("update-paid",n.tempOrder)})}," 修改付款狀態 ")])])])],512)}var Z=c("85f5"),ee={props:{order:{type:Object,default:function(){return{}}}},data:function(){return{modal:"",tempOrder:{}}},emits:["update-paid"],inject:["emitter"],mixins:[Z["a"]],watch:{order:function(){this.tempOrder=this.order}}};ee.render=Y;var te=ee,ce=c("6ff1"),ae={data:function(){return{orders:{},tempOrder:{},isNew:!1,pagination:{},currentPage:1}},components:{Pagination:p["a"],OrderModal:te,DelModal:ce["a"]},inject:["emitter"],methods:{getOrders:function(e){var t=this;this.currentPage=e;var c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("carrie","/admin/orders?page=").concat(e);this.$http.get(c).then((function(e){e.data.success&&(console.log(e),t.orders=e.data.orders,t.pagination=e.data.pagination)}))},updatePaid:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io","/api/").concat("carrie","/admin/order/").concat(e.id),a={is_paid:e.is_paid};this.$http.put(c,{data:a}).then((function(e){var c=t.$refs.OrderModal;c.hideModal(),console.log(e.data.message),t.getOrders(t.currentPage)}))},openModal:function(e){this.tempOrder=Object(u["a"])({},e);var t=this.$refs.OrderModal;t.openModal()},delOrder:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io","/api/").concat("carrie","/admin/order/").concat(this.tempOrder.id);this.$http.delete(t).then((function(t){console.log(t.data.message);var c=e.$refs.DelModal;c.hideModal(),e.getOrders(e.currentPage)}))},openDelOrderModal:function(e){this.tempOrder=Object(u["a"])({},e);var t=this.$refs.DelModal;t.openModal()}},created:function(){this.getOrders()}};ae.render=O;t["default"]=ae},1799:function(e,t,c){"use strict";var a=c("7a23"),l={"aria-label":"Page navigation"},n={class:"pagination justify-content-center"},r=Object(a["g"])("span",{"aria-hidden":"true"},"«",-1),d={key:0,class:"page-link"},b=Object(a["g"])("span",{"aria-hidden":"true"},"»",-1);function i(e,t,c,i,o,s){return Object(a["p"])(),Object(a["d"])("nav",l,[Object(a["g"])("ul",n,[Object(a["g"])("li",{class:["page-item",{disabled:!c.pages.has_pre}]},[Object(a["g"])("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:t[1]||(t[1]=Object(a["D"])((function(e){return s.updatePage(c.pages.current_page-1)}),["prevent"]))},[r])],2),(Object(a["p"])(!0),Object(a["d"])(a["a"],null,Object(a["t"])(c.pages.total_pages,(function(e){return Object(a["p"])(),Object(a["d"])("li",{class:["page-item",{active:e===c.pages.current_page}],key:e},[e===c.pages.current_page?(Object(a["p"])(),Object(a["d"])("span",d,Object(a["w"])(e),1)):(Object(a["p"])(),Object(a["d"])("a",{key:1,class:"page-link",href:"#",onClick:Object(a["D"])((function(t){return s.updatePage(e)}),["prevent"])},Object(a["w"])(e),9,["onClick"]))],2)})),128)),Object(a["g"])("li",{class:["page-item",{disabled:!c.pages.has_next}]},[Object(a["g"])("a",{class:"page-link",href:"#","aria-label":"Next",onClick:t[2]||(t[2]=Object(a["D"])((function(e){return s.updatePage(c.pages.current_page+1)}),["prevent"]))},[b])],2)])])}var o={props:{pages:{type:Object,default:function(){return{}}}},methods:{updatePage:function(e){this.$emit("emitPages",e)}}};o.render=i;t["a"]=o},b0c0:function(e,t,c){var a=c("83ab"),l=c("9bf2").f,n=Function.prototype,r=n.toString,d=/^\s*function ([^ (]*)/,b="name";a&&!(b in n)&&l(n,b,{configurable:!0,get:function(){try{return r.call(this).match(d)[1]}catch(e){return""}}})}}]);
//# sourceMappingURL=chunk-3e5d698c.81a35bb9.js.map